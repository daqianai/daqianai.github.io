import{_ as t,c as a,o as s,a2 as i}from"./chunks/framework.DDIT__tB.js";const u=JSON.parse('{"title":"Codex","description":"","frontmatter":{},"headers":[],"relativePath":"docs/openai/guides/codex.md","filePath":"docs/openai/guides/codex.md","lastUpdated":1747747486000}'),n={name:"docs/openai/guides/codex.md"};function o(r,e,l,d,p,c){return s(),a("div",null,e[0]||(e[0]=[i(`<h1 id="codex" tabindex="-1">Codex <a class="header-anchor" href="#codex" aria-label="Permalink to &quot;Codex&quot;">​</a></h1><p>Delegate tasks to a software engineering agent in the cloud.</p><p>Codex is a cloud-based software engineering agent. Use it to fix bugs, review code, do refactors, and fix pieces of code in response to user feedback. It&#39;s powered by a version of <a href="/docs/models/o3">OpenAI o3</a> that&#39;s fine-tuned for real-world software development.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>We believe in a future where developers drive the work they want to own, delegating toilsome tasks to agents. We see early signs of this future today at OpenAI, with Codex working in its own environment and drafting pull requests in our repos.</p><p><strong>Codex vs. Codex CLI</strong><br> These docs cover Codex, a cloud-based agent you can find in your browser. For an open-source CLI agent you can run locally in your terminal, <a href="https://github.com/openai/codex#openai-codex-cli" target="_blank" rel="noreferrer">install Codex CLI</a>.</p><h3 id="video-getting-started-with-codex" tabindex="-1">Video: Getting started with Codex <a class="header-anchor" href="#video-getting-started-with-codex" aria-label="Permalink to &quot;Video: Getting started with Codex&quot;">​</a></h3><p>Codex evolves quickly and may not match exactly the UI shown below, but this video will give you a quick overview of how to get started with Codex inside ChatGPT.</p><h2 id="connect-your-github" tabindex="-1">Connect your GitHub <a class="header-anchor" href="#connect-your-github" aria-label="Permalink to &quot;Connect your GitHub&quot;">​</a></h2><p>To grant the Codex agent access to your GitHub repos, install our GitHub app to your organization. The two permissions required are ability to <em>clone the repo</em> and the ability to <em>push a pull request</em> to it. Our app <strong>will not write to your repo without your permission</strong>.</p><p>Each user in your organization must authenticate with their GitHub account before being able to use Codex. After auth, we grant access to your GitHub repos and environments at the ChatGPT workspace level—meaning if your teammate grants access to a repo, you&#39;ll also be able to run Codex tasks in that repo, as long as you share a <a href="https://help.openai.com/en/articles/8798594-what-is-a-workspace-how-do-i-access-my-chatgpt-team-workspace" target="_blank" rel="noreferrer">workspace</a>.</p><h2 id="how-it-works" tabindex="-1">How it works <a class="header-anchor" href="#how-it-works" aria-label="Permalink to &quot;How it works&quot;">​</a></h2><p>At a high level, you specify a prompt, and the agent goes to work in its own environment. After about 8-10 minutes, the agent gives you back a diff.</p><p>You can execute prompts in either <em>ask</em> mode or <em>code</em> mode. When you select <em>ask</em>, Codex clones a read-only version of your repo, booting faster and giving you follow-up tasks. <em>Code</em> mode, however, creates a full-fledged environment that the agent can run and test against.</p><p>Exact flow:</p><ol><li>You navigate to <a href="http://chatgpt.com/codex" target="_blank" rel="noreferrer">chatgpt.com/codex</a> and <strong>submit a task</strong>.</li><li>We launch a new <strong>Docker container</strong> based upon our <a href="https://github.com/openai/codex-universal" target="_blank" rel="noreferrer"><strong>base image</strong></a>. We then <strong>clone your repo</strong> at the desired <strong>branch or sha</strong> and run any <strong>setup scripts</strong> you have from the specified <strong>workdir</strong>.</li><li>We <strong>disable network access</strong>. The agent does not have the ability to install dependencies from this point forward.</li><li>The agent then <strong>runs terminal commands in a loop</strong>. It writes code, runs tests, and attempts to check its work. The agent attempts to honor any specified lint or test commands you&#39;ve defined in an <code>AGENTS.md</code> file. The agent does not have access to any special tools outside of the terminal or CLI tools you provide.</li><li>When the agent completes your task, it <strong>presents a a diff</strong> or a set of follow-up tasks. You can choose to <strong>open a PR</strong> or respond with follow-up comments to ask for additional changes.</li></ol><h2 id="submit-tasks-to-codex" tabindex="-1">Submit tasks to Codex <a class="header-anchor" href="#submit-tasks-to-codex" aria-label="Permalink to &quot;Submit tasks to Codex&quot;">​</a></h2><p>After connecting your repository, begin sending tasks using one of two modes:</p><ul><li><strong>Ask mode</strong> for brainstorming, audits, or architecture questions</li><li><strong>Code mode</strong> for when you want automated refactors, tests, or fixes applied</li></ul><p>Below are some example tasks to get you started with Codex.</p><h3 id="ask-mode-examples" tabindex="-1">Ask mode examples <a class="header-anchor" href="#ask-mode-examples" aria-label="Permalink to &quot;Ask mode examples&quot;">​</a></h3><p>Use ask mode to get advice and insights on your code, no changes applied.</p><ol><li><p><strong>Refactoring suggestions</strong></p><p>Codex can help brainstorm structural improvements, such as splitting files, extracting functions, and tightening documentation.</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Take a look at &lt;hairiest file in my codebase&gt;.</span></span>
<span class="line"><span>Can you suggest better ways to split it up, test it, and isolate functionality?</span></span></code></pre></div></li><li><p><strong>Q&amp;A and architecture understanding</strong></p><p>Codex can answer deep questions about your codebase and generate diagrams.</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Document and create a mermaidjs diagram of the full request flow from the client</span></span>
<span class="line"><span>endpoint to the database.</span></span></code></pre></div></li></ol><h3 id="code-mode-examples" tabindex="-1">Code mode examples <a class="header-anchor" href="#code-mode-examples" aria-label="Permalink to &quot;Code mode examples&quot;">​</a></h3><p>Use code mode when you want Codex to actively modify code and prepare a pull request.</p><ol><li><p><strong>Security vulnerabilities</strong></p><p>Codex excels at auditing intricate logic and uncovering security flaws.</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>There&#39;s a memory-safety vulnerability in &lt;my package&gt;. Find it and fix it.</span></span></code></pre></div></li><li><p><strong>Code review</strong></p><p>Append <code>.diff</code> to any pull request URL and include it in your prompt. Codex loads the patch inside the container.</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Please review my code and suggest improvements. The diff is below:</span></span>
<span class="line"><span>&lt;diff&gt;</span></span></code></pre></div></li><li><p><strong>Adding tests</strong></p><p>After implementing initial changes, follow up with targeted test generation.</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>From my branch, please add tests for the following files:</span></span>
<span class="line"><span>&lt;files&gt;</span></span></code></pre></div></li><li><p><strong>Bug fixing</strong></p><p>A stack trace is usually enough for Codex to locate and correct the problem.</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Find and fix a bug in &lt;my package&gt;.</span></span></code></pre></div></li><li><p><strong>Product and UI fixes</strong></p><p>Although Codex cannot render a browser, it can resolve minor UI regressions.</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>The modal on our onboarding page isn&#39;t centered. Can you fix it?</span></span></code></pre></div></li></ol><h2 id="environment-configuration" tabindex="-1">Environment configuration <a class="header-anchor" href="#environment-configuration" aria-label="Permalink to &quot;Environment configuration&quot;">​</a></h2><p>While Codex works out of the box, you can customize the agent&#39;s environment to e.g. install dependencies and tools. Having access to a fuller set of dependencies, linters, formatters, etc. often results in better agent performance.</p><h3 id="default-universal-image" tabindex="-1">Default universal image <a class="header-anchor" href="#default-universal-image" aria-label="Permalink to &quot;Default universal image&quot;">​</a></h3><p>The Codex agent runs in a default container image called <code>universal</code>, which comes pre-installed with common languages, packages, and tools.</p><p><em>Set package versions</em> in environment settings can be used to configure the version of Python, Node.js, etc.</p><p>[</p><p>openai/codex-universal</p><p>For details on what&#39;s installed, see <code>openai/codex-universal</code> for a reference Dockerfile and an image that can be pulled and tested locally.</p><p>](<a href="https://github.com/openai/codex-universal" target="_blank" rel="noreferrer">https://github.com/openai/codex-universal</a>)</p><p>While <code>codex-universal</code> comes with languages pre-installed for speed and convenience, you can also install additional packages to the container using <a href="#setup-scripts">setup scripts</a>.</p><h3 id="environment-variables-and-secrets" tabindex="-1">Environment variables and secrets <a class="header-anchor" href="#environment-variables-and-secrets" aria-label="Permalink to &quot;Environment variables and secrets&quot;">​</a></h3><p><strong>Environment variables</strong> can be specified and are set for the full duration of the task.</p><p><strong>Secrets</strong> can also be specified and are similar to environment variables, except:</p><ul><li>They are stored with an additional layer of encryption and are only decrypted for task execution.</li><li>They are only available to setup scripts. For security reasons, secrets are removed from the environment when the agent is running.</li></ul><h3 id="setup-scripts" tabindex="-1">Setup scripts <a class="header-anchor" href="#setup-scripts" aria-label="Permalink to &quot;Setup scripts&quot;">​</a></h3><p>Setup scripts are bash scripts that run at the start of every task. To get the best results from the agent, we recommend installing dependencies and linters / code formatters—and using <a href="#create-an-agents-md">AGENTS.md</a> to instruct the agent to run tests and use these tools.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Install type checker</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pyright</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Install dependencies</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">poetry</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --with</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><p>Setup scripts are run in a separate bash session than the agent, so commands like <code>export</code> do not persist. You can persist environment variables by adding them to <code>~/.bashrc</code>.</p><h3 id="internet-access-and-network-proxy" tabindex="-1">Internet access and network proxy <a class="header-anchor" href="#internet-access-and-network-proxy" aria-label="Permalink to &quot;Internet access and network proxy&quot;">​</a></h3><p><strong>Internet access is currently only available during the setup script phase</strong>, so dependencies should be installed up front in setup scripts.</p><p>When internet access <em>is</em> available, environments run behind an HTTP/HTTPS network proxy for security and abuse prevention purposes. All outbound internet traffic must pass through this proxy.</p><p>Environments are pre-configured to work with common tools and package managers:</p><ol><li>Codex sets standard environment variables including <code>http_proxy</code> and <code>https_proxy</code>. These settings are respected by tools such as <code>curl</code>, <code>npm</code>, and <code>pip</code>.</li><li>Codex installs a proxy certificate into the system trust store. This certificate&#39;s path is available as the environment variable <code>$CODEX_PROXY_CERT</code>. Additionally, specific package manager variables (e.g., <code>PIP_CERT</code>, <code>NODE_EXTRA_CA_CERTS</code>) are set to this certificate path.</li></ol><p>If you&#39;re encountering connectivity issues, verify and/or configure the following:</p><ul><li>Ensure you are connecting via the proxy at <code>http://proxy:8080</code>.</li><li>Ensure you are trusting the proxy certificate located at <code>$CODEX_PROXY_CERT</code>. Always reference this environment variable instead of using a hardcoded file path, as the path may change.</li></ul><h2 id="using-agents-md" tabindex="-1">Using AGENTS.md <a class="header-anchor" href="#using-agents-md" aria-label="Permalink to &quot;Using AGENTS.md&quot;">​</a></h2><p>Provide common context by adding an <code>AGENTS.md</code> file. This is just a standard Markdown file the agent reads to understand how to work in your repository. <code>AGENTS.md</code> can be nested, and the agent will by default respect whatever the most nested root that it&#39;s looking for. Some customers also prompt the agent to look for <code>.currsorrules</code> or <code>CLAUDE.md</code> explicitly. We recommend sharing any bits of organization-wide configuration in this file.</p><p>Common things you might want to include:</p><ul><li>An overview showing which particular files and folders to work in</li><li>Contribution and style guidelines</li><li>Parts of the codebase being migrated</li><li>How to validate changes (running lint, tests, etc.)</li><li>How the agent should do and present its work (where to explore relevant context, when to write docs, how to format PR messages, etc.)</li></ul><p>Here&#39;s an example as one way to structure your <code>AGENTS.md</code> file:</p><p>AGENTS.md</p><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;"># Contributor Guide</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## Dev Environment Tips</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Use pnpm dlx turbo run where &lt;project_name&gt; to jump to a package instead of scanning with ls.</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Run pnpm install --filter &lt;project_name&gt; to add the package to your workspace so Vite, ESLint, and TypeScript can see it.</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Use pnpm create vite@latest &lt;project_name&gt; -- --template react-ts to spin up a new React + Vite package with TypeScript checks ready.</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Check the name field inside each package&#39;s package.json to confirm the right name—skip the top-level one.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## Testing Instructions</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Find the CI plan in the .github/workflows folder.</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Run pnpm turbo run test --filter &lt;project_name&gt; to run every check defined for that package.</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> From the package root you can just call pnpm test. The commit should pass all tests before you merge.</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> To focus on one step, add the Vitest pattern: pnpm vitest run -t &quot;&lt;test name&gt;&quot;.</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Fix any test or type errors until the whole suite is green.</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> After moving files or changing imports, run pnpm lint --filter &lt;project_name&gt; to be sure ESLint and TypeScript rules still pass.</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Add or update tests for the code you change, even if nobody asked.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## PR instructions</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Title format: [</span><span style="--shiki-light:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#DBEDFF;--shiki-dark-text-decoration:underline;">&lt;project_name&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] &lt;Title&gt;</span></span></code></pre></div><h3 id="prompting-codex" tabindex="-1">Prompting Codex <a class="header-anchor" href="#prompting-codex" aria-label="Permalink to &quot;Prompting Codex&quot;">​</a></h3><p>Just like ChatGPT, Codex is only as effective as the instructions you give it. Here are some tips we find helpful when prompting Codex:</p><h4 id="provide-clear-code-pointers" tabindex="-1">Provide clear code pointers <a class="header-anchor" href="#provide-clear-code-pointers" aria-label="Permalink to &quot;Provide clear code pointers&quot;">​</a></h4><p>Codex is good at locating relevant code, but it&#39;s more efficient when the prompt narrows its search to a few files or packages. Whenever possible, use <strong>greppable identifiers, full stack traces, or rich code snippets</strong>.</p><h4 id="include-verification-steps" tabindex="-1">Include verification steps <a class="header-anchor" href="#include-verification-steps" aria-label="Permalink to &quot;Include verification steps&quot;">​</a></h4><p>Codex produces higher-quality outputs when it can verify its work. Provide <strong>steps to reproduce an issue, validate a feature, and run any linter or pre-commit checks</strong>. If additional packages or custom setups are needed, see <a href="#environment-configuration">Environment configuration</a>.</p><h4 id="customize-how-codex-does-its-work" tabindex="-1">Customize how Codex does its work <a class="header-anchor" href="#customize-how-codex-does-its-work" aria-label="Permalink to &quot;Customize how Codex does its work&quot;">​</a></h4><p>You can <strong>tell Codex how to approach tasks or use its tools</strong>. For example, ask it to use specific commits for reference, log failing commands, avoid certain executables, follow a template for PR messages, treat specific files as AGENTS.md, or draw ASCII art before finishing the work.</p><h4 id="split-large-tasks" tabindex="-1">Split large tasks <a class="header-anchor" href="#split-large-tasks" aria-label="Permalink to &quot;Split large tasks&quot;">​</a></h4><p>Like a human engineer, Codex handles really complex work better when it&#39;s broken into smaller, focused steps. Smaller tasks are easier for Codex to test and for you to review. You can even ask Codex to help break tasks down.</p><h4 id="leverage-codex-for-debugging" tabindex="-1">Leverage Codex for debugging <a class="header-anchor" href="#leverage-codex-for-debugging" aria-label="Permalink to &quot;Leverage Codex for debugging&quot;">​</a></h4><p>When you hit bugs or unexpected behaviors, try <strong>pasting detailed logs or error traces into Codex as the first debugging step</strong>. Codex can analyze issues in parallel and could help you identify root causes more quickly.</p><h4 id="try-open-ended-prompts" tabindex="-1">Try open-ended prompts <a class="header-anchor" href="#try-open-ended-prompts" aria-label="Permalink to &quot;Try open-ended prompts&quot;">​</a></h4><p>Beyond targeted tasks, Codex often pleasantly surprises us with open-ended tasks. Try asking it to clean up code, find bugs, brainstorm ideas, break down tasks, write a detailed doc, etc.</p>`,72)]))}const g=t(n,[["render",o]]);export{u as __pageData,g as default};
